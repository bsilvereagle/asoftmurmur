<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<title>A Soft Murmur</title>
<meta name="description" content="Mix ambient sounds together to wash away distraction and help you focus or relax" />
<link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="js/jquery.mobile.custom.structure.min.css" />
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.mobile.custom.min.js"></script>
<script src="js/hotkeys.js"></script>
<link rel="icon" href="favicon.png">

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@asoftmurmur">
<meta name="twitter:title" content="A Soft Murmur">
<meta name="twitter:description" content="Mix ambient sounds together to wash away distraction and help you focus or relax">
<meta name="twitter:creator" content="@asoftmurmur">
<meta name="twitter:image" content="http://asoftmurmur.com/img/meta.jpg">

<!-- Open Graph data -->
<meta property="og:title" content="A Soft Murmur" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://asoftmurmur.com" />
<meta property="og:image" content="http://asoftmurmur.com/img/meta.jpg" />
<meta property="og:description" content="Mix ambient sounds together to wash away distraction and help you focus or relax" /> 
<meta property="og:site_name" content="A Soft Murmur" />

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-42700626-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript">

$(document).ready(function() {

var fadeInOutMs = 150; // Probably a good idea if everything fades at the same speed

var rainslider = $("#rain-slider");
var wavesslider = $("#waves-slider");
var thunderslider = $("#thunder-slider");
var fireslider = $("#fire-slider");
var birdsslider = $("#birds-slider");
var humansslider = $("#humans-slider");

var rainbackground = $("#rain-slider-background");
var wavesbackground = $("#waves-slider-background");
var thunderbackground = $("#thunder-slider-background");
var firebackground = $("#fire-slider-background");
var birdsbackground = $("#birds-slider-background");
var humansbackground = $("#humans-slider-background");

var rainplayer0 = $('#rainplayer')[0]; 
var rainglueplayer0 = $('#rainglueplayer')[0];
var wavesplayer0 = $('#wavesplayer')[0];
var wavesglueplayer0 = $('#wavesglueplayer')[0];
var thunderplayer0 = $('#thunderplayer')[0];
var thunderglueplayer0 = $('#thunderglueplayer')[0];
var fireplayer0 = $('#fireplayer')[0];
var fireglueplayer0 = $('#fireglueplayer')[0];
var birdsplayer0 = $('#birdsplayer')[0];
var birdsglueplayer0 = $('#birdsglueplayer')[0];
var humansplayer0 = $('#humansplayer')[0];
var humansglueplayer0 = $('#humansglueplayer')[0];

var rainplayer = $('#rainplayer'); 
var rainglueplayer = $('#rainglueplayer');
var wavesplayer = $('#wavesplayer');
var wavesglueplayer = $('#wavesglueplayer');
var thunderplayer = $('#thunderplayer');
var thunderglueplayer = $('#thunderglueplayer');
var fireplayer = $('#fireplayer');
var fireglueplayer = $('#fireglueplayer');
var birdsplayer = $('#birdsplayer');
var birdsglueplayer = $('#birdsglueplayer');
var humansplayer = $('#humansplayer');
var humansglueplayer = $('#humansglueplayer');

var silence = $('#silence');

var buttonoptions = $('#buttonoptions');
var timedpausepre = $('#timedpausepre');
var timedpausepost = $('#timedpausepost');
var tpbutton = $('#timedpausebutton');
var canceltp = $('#canceltp');
var startminutesinput = $('#minutestillstart');

var timedstartpre = $('#timedstartpre');
var timedstartpost = $('#timedstartpost');
var tsbutton = $('#timedstartbutton');
var cancelts = $('#cancelts');
var pauseminutesinput = $('#minutestillpause');

var timedfadepre = $('#timedfadepre');
var timedfadepost = $('#timedfadepost');
var tfbutton = $('#timedfadebutton');
var canceltf = $('#canceltf');
var fademinutesinput = $('#minutestillfade');

var meanderpost = $('#meanderpost');

var ppbutton = $("#play-pause-button");

// Expand collapsed sounds on click or tap test function

var cicadaContainer = $('#cicadatest-slider-container');
var cicadaMp4 = $('#cicadatestmp4');
var cicadaMp4Src = 'audio/cicadatest.mp4';
var cicadaglueMp4 =$('#cicadatest-gluemp4');
var cicadaglueMp4Src = 'audio/cicadatest.glue.mp4';
var cicadaCollapseButton = $('#cicada-collapse-button');
var cicadaExpandButton = $('#cicada-expand-button');
var sliderCollapsed= 'sliders-collapsed';
var sliderExpanded = 'sliders-expanded';
var cicadaLoaded = 0;

//

var humansContainer = $('#humans-slider-container');
var humansMp4 = $('#humansmp4');
var humansMp4Src = 'audio/humans.fade.mp4';
var humansGlueMp4 =$('#humansgluemp4');
var humansGlueMp4Src = 'audio/humans.glue.mp4';
var humansOgg = $('#humansogg');
var humansOggSrc = 'audio/humans.fade.ogg';
var humansGlueOgg =$('#humansglueogg');
var humansGlueOggSrc = 'audio/humans.glue.ogg';
var humansCollapseButton = $('#humans-collapse-button');
var humansExpandButton = $('#humans-expand-button');
var humansLoaded = 0;

//

var birdsContainer = $('#birds-slider-container');
var birdsMp4 = $('#birdsmp4');
var birdsMp4Src = 'audio/birds.fade.mp4';
var birdsGlueMp4 =$('#birdsgluemp4');
var birdsGlueMp4Src = 'audio/birds.glue.mp4';
var birdsOgg = $('#birdsogg');
var birdsOggSrc = 'audio/birds.fade.ogg';
var birdsGlueOgg =$('#birdsglueogg');
var birdsGlueOggSrc = 'audio/birds.glue.ogg';
var birdsCollapseButton = $('#birds-collapse-button');
var birdsExpandButton = $('#birds-expand-button');
var birdsLoaded = 0;

//

var rainContainer = $('#rain-slider-container');
var rainMp4 = $('#rainmp4');
var rainMp4Src = 'audio/rain.fade.mp4';
var rainGlueMp4 =$('#raingluemp4');
var rainGlueMp4Src = 'audio/rain.glue.mp4';
var rainOgg = $('#rainogg');
var rainOggSrc = 'audio/rain.fade.ogg';
var rainGlueOgg =$('#rainglueogg');
var rainGlueOggSrc = 'audio/rain.glue.ogg';
var rainCollapseButton = $('#rain-collapse-button');
var rainExpandButton = $('#rain-expand-button');
var rainLoaded = 0;

//

var thunderContainer = $('#thunder-slider-container');
var thunderMp4 = $('#thundermp4');
var thunderMp4Src = 'audio/thunder.fade.mp4';
var thunderGlueMp4 =$('#thundergluemp4');
var thunderGlueMp4Src = 'audio/thunder.glue.mp4';
var thunderOgg = $('#thunderogg');
var thunderOggSrc = 'audio/thunder.fade.ogg';
var thunderGlueOgg =$('#thunderglueogg');
var thunderGlueOggSrc = 'audio/thunder.glue.ogg';
var thunderCollapseButton = $('#thunder-collapse-button');
var thunderExpandButton = $('#thunder-expand-button');
var thunderLoaded = 0;

//

var fireContainer = $('#fire-slider-container');
var fireMp4 = $('#firemp4');
var fireMp4Src = 'audio/fire.fade.mp4';
var fireGlueMp4 =$('#firegluemp4');
var fireGlueMp4Src = 'audio/fire.glue.mp4';
var fireOgg = $('#fireogg');
var fireOggSrc = 'audio/fire.fade.ogg';
var fireGlueOgg =$('#fireglueogg');
var fireGlueOggSrc = 'audio/fire.glue.ogg';
var fireCollapseButton = $('#fire-collapse-button');
var fireExpandButton = $('#fire-expand-button');
var fireLoaded = 0;

//

var wavesContainer = $('#waves-slider-container');
var wavesMp4 = $('#wavesmp4');
var wavesMp4Src = 'audio/waves.fade.mp4';
var wavesGlueMp4 =$('#wavesgluemp4');
var wavesGlueMp4Src = 'audio/waves.glue.mp4';
var wavesOgg = $('#wavesogg');
var wavesOggSrc = 'audio/waves.fade.ogg';
var wavesGlueOgg =$('#wavesglueogg');
var wavesGlueOggSrc = 'audio/waves.glue.ogg';
var wavesCollapseButton = $('#waves-collapse-button');
var wavesExpandButton = $('#waves-expand-button');
var wavesLoaded = 0;

//

function expandSlider(container, mp4, mp4src, gluemp4, gluemp4src, ogg, oggsrc, glueogg, glueoggsrc, button, player0, glueplayer0, loadingId) {
  if (container.hasClass( sliderCollapsed ) ) {
    container.addClass( "excount" );
    container.fadeOut( fadeInOutMs, function() {
      
    
      container.removeClass( sliderCollapsed );
      container.addClass( sliderExpanded );
      
      if ( mp4.attr('src') === "" )  {
        gluemp4.attr('src', gluemp4src).detach().appendTo(glueplayer0);
        mp4.attr('src', mp4src).detach().appendTo(player0);
        container.append('<div class="loading-element" id="' + loadingId + '"><p class="dtext">Loading</p></div>');
        button.hide();
        container.insertBefore( $(".sliders-collapsed").first() );
        container.fadeIn( fadeInOutMs );

        glueplayer0.addEventListener("canplaythrough", function() { 
         $("#" + loadingId).remove();
        });
      }
      
      else {

        button.hide();
        container.insertBefore( $(".sliders-collapsed").first() );
        container.fadeIn( fadeInOutMs );
      
      }
  });
  
  
  }
}

function expandSliderCicada() {
  expandSlider(cicadaContainer, cicadaMp4, cicadaMp4Src, cicadaglueMp4, cicadaglueMp4Src, 0 ,0, 0, 0, cicadaExpandButton, cicadaplayer0, cicadaglueplayer0, "loading-cicada")
}

//

function expandSliderHumans() {
  expandSlider(humansContainer, humansMp4, humansMp4Src, humansGlueMp4, humansGlueMp4Src, humansOgg, humansOggSrc, humansGlueOgg, humansGlueOggSrc, humansExpandButton, humansplayer0, humansglueplayer0, "loading-humans")
}

//

function expandSliderBirds() {
  expandSlider(birdsContainer, birdsMp4, birdsMp4Src, birdsGlueMp4, birdsGlueMp4Src, birdsOgg, birdsOggSrc, birdsGlueOgg, birdsGlueOggSrc, birdsExpandButton, birdsplayer0, birdsglueplayer0, "loading-birds")
}

//

function expandSliderRain() {
  expandSlider(rainContainer, rainMp4, rainMp4Src, rainGlueMp4, rainGlueMp4Src, rainOgg, rainOggSrc, rainGlueOgg, rainGlueOggSrc, rainExpandButton, rainplayer0, rainglueplayer0, "loading-rain")
}

//

function expandSliderThunder() {
  expandSlider(thunderContainer, thunderMp4, thunderMp4Src, thunderGlueMp4, thunderGlueMp4Src, thunderOgg, thunderOggSrc, thunderGlueOgg, thunderGlueOggSrc, thunderExpandButton, thunderplayer0, thunderglueplayer0, "loading-thunder")
}

//

function expandSliderFire() {
  expandSlider(fireContainer, fireMp4, fireMp4Src, fireGlueMp4, fireGlueMp4Src, fireOgg, fireOggSrc, fireGlueOgg, fireGlueOggSrc, fireExpandButton, fireplayer0, fireglueplayer0, "loading-fire")
}

//

function expandSliderWaves() {
  expandSlider(wavesContainer, wavesMp4, wavesMp4Src, wavesGlueMp4, wavesGlueMp4Src, wavesOgg, wavesOggSrc, wavesGlueOgg, wavesGlueOggSrc, wavesExpandButton, wavesplayer0, wavesglueplayer0, "loading-waves")
}

//


cicadaExpandButton.click( 

  function() {
    expandSliderCicada();
  }
);

//

humansExpandButton.click( 

  function() {
    expandSliderHumans();
  }
);

//

birdsExpandButton.click( 

  function() {
    expandSliderBirds();
  }
);

//

rainExpandButton.click( 

  function() {
    expandSliderRain();
  }
);

//

thunderExpandButton.click( 

  function() {
    expandSliderThunder();
  }
);

//

fireExpandButton.click( 

  function() {
    expandSliderFire();
  }
);

//

wavesExpandButton.click( 

  function() {
    expandSliderWaves();
  }
);

//


function pauseOnCollapse(player, glueplayer) {
  player.pause();
  glueplayer.pause();
}


function silenceOnCollapse(slider) {
  slider.val(0);
  slider.slider("refresh");
}

function collapseSlider(container, button, player0, glueplayer0, slider) {
  container.removeClass( "excount" );
  container.fadeOut( fadeInOutMs, function() {
  
    container.removeClass( sliderExpanded );
    container.addClass( sliderCollapsed );
    button.show();
    pauseOnCollapse(player0, glueplayer0);
    silenceOnCollapse(slider);
    
    container.insertAfter( $(".sliders-expanded").last()  );
    container.fadeIn( fadeInOutMs );    
  });

}

//

cicadaCollapseButton.click(

  function() {
    collapseSlider(cicadaContainer, cicadaExpandButton, cicadaplayer0, cicadaglueplayer0, cicadaslider);
  }

);

//

function collapseSliderHumans() {
    collapseSlider(humansContainer, humansExpandButton, humansplayer0, humansglueplayer0, humansslider);
}

humansCollapseButton.click(

  function() {
  collapseSliderHumans();
  }

);

//

function collapseSliderBirds() {
    collapseSlider(birdsContainer, birdsExpandButton, birdsplayer0, birdsglueplayer0, birdsslider);
}

birdsCollapseButton.click(

  function() {
  collapseSliderBirds();
  }

);

//

function collapseSliderRain() {
    collapseSlider(rainContainer, rainExpandButton, rainplayer0, rainglueplayer0, rainslider);
}

rainCollapseButton.click(

  function() {
  collapseSliderRain();
  }

);

//

function collapseSliderThunder() {
    collapseSlider(thunderContainer, thunderExpandButton, thunderplayer0, thunderglueplayer0, thunderslider);
}

thunderCollapseButton.click(

  function() {
  collapseSliderThunder();
  }

);

//

function collapseSliderFire() {
    collapseSlider(fireContainer, fireExpandButton, fireplayer0, fireglueplayer0, fireslider);
}

fireCollapseButton.click(

  function() {
  collapseSliderFire();
  }

);

//

function collapseSliderWaves() {
    collapseSlider(wavesContainer, wavesExpandButton, wavesplayer0, wavesglueplayer0, wavesslider);
}

wavesCollapseButton.click(

  function() {
  collapseSliderWaves();
  }

);



// Get slider working

var cicadaslider = $("#cicadatest-slider");
var cicadabackground = $("#cicadatest-slider-background");
var cicadaplayer0 = $('#cicadatest')[0]; 
var cicadaplayer = $('#cicadatest');
var cicadaglueplayer0 = $('#cicadatest-glue')[0]; 
var cicadaglueplayer = $('#cicadatest-glue');  


// end test functions

function loadAudible(player0, player){
  if(player0.volume > 0.02) {
    player.attr("preload", "auto");
  }
}

loadAudible(rainplayer0, rainplayer);
loadAudible(thunderplayer0, thunderplayer);
loadAudible(fireplayer0, fireplayer);
loadAudible(wavesplayer0, wavesplayer);
loadAudible(birdsplayer0, birdsplayer);
loadAudible(humansplayer0, humansplayer);
loadAudible(cicadaplayer0, cicadaplayer);
    
  function playif(player, glueplayer){
      if(player.volume > 0.02) {
        player.play();     
        if(player.currentTime < 0.01) {
          glueplayer.currentTime = 7;
          glueplayer.play();      
        }
      }
        
  }
  
  function playall(){
    playif(rainplayer0, rainglueplayer0);
    playif(wavesplayer0, wavesglueplayer0);
    playif(thunderplayer0, thunderglueplayer0);
    playif(fireplayer0, fireglueplayer0);
    playif(birdsplayer0, birdsglueplayer0);          
    playif(humansplayer0, humansglueplayer0);
    playif(cicadaplayer0, cicadaglueplayer0);  
  }
  
  function pauseIf(player, glueplayer){
      player.pause();
      glueplayer.pause(); 
  }
  
  function pauseall(){
    pauseIf(rainplayer0, rainglueplayer0);
    pauseIf(wavesplayer0, wavesglueplayer0);  
    pauseIf(thunderplayer0, thunderglueplayer0);
    pauseIf(fireplayer0, fireglueplayer0);
    pauseIf(birdsplayer0, birdsglueplayer0);  
    pauseIf(humansplayer0, humansglueplayer0);    
    pauseIf(cicadaplayer0, cicadaglueplayer0);    
  }  
  
//play-all and pause-all function

  function slidervol(player, glueplayer, slider, sliderbackground) {
      player.volume = slider.val();
      glueplayer.volume = slider.val();
      sliderbackground.css({'opacity': slider.val() });
        if(player.volume > 0.02 && $("#play-pause-button").hasClass('pause-all')) {
          player.play();
        }
        if(player.volume > 0.02 && $("#play-pause-button").hasClass('pause-all') && player.currentTime <0.01 && glueplayer.paused){
          glueplayer.currentTime = 7;
          glueplayer.play(); // play half of glueplayer while the main audio element loads          
        }
        if(player.volume <= 0.02) {
          player.pause();
        }
        if(glueplayer.volume <= 0.02) {
          glueplayer.pause();
        } 
  }
  
  function remembervol( slider, lsvol ) {
    localStorage.setItem( lsvol, slider.val() );
  }
  
// function updates volume at load and when slider moves and sets localstorage


function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

var urlvhex = getParameterByName("v");

// get query strings from url
  
  var lastrainvol = localStorage.getItem("lsrain");
      if (typeof lastrainvol != "object"){ 
      
        if (lastrainvol > 0.02 && rainContainer.hasClass("sliders-collapsed") && urlvhex === null ) {
          expandSliderRain(); // expand and load audio if localstorage volume > 0.02
        }
        
        
        if( lastrainvol <= 0.02 && rainContainer.hasClass("sliders-expanded") && urlvhex === null ) {
          collapseSliderRain();
        }
      
        rainslider.val(lastrainvol);
        rainslider.slider("refresh");
      }

  slidervol(rainplayer0, rainglueplayer0, rainslider, rainbackground);
  
  rainslider.on( 'change', function( event, ui ) {
    slidervol(rainplayer0, rainglueplayer0, rainslider, rainbackground);
    remembervol(rainslider, "lsrain");
  })
  
// 
  
   
  var lastwavesvol = localStorage.getItem("lswaves");
      if (typeof lastwavesvol != "object"){ 
      
        if (lastwavesvol > 0.02 && wavesContainer.hasClass("sliders-collapsed") && urlvhex === null ) {
          expandSliderWaves(); // expand and load audio if localstorage volume > 0.02
        }
        
        
        if( lastwavesvol <= 0.02 && wavesContainer.hasClass("sliders-expanded") && urlvhex === null ) {
          collapseSliderWaves();
        }
      
        wavesslider.val(lastwavesvol);
        wavesslider.slider("refresh");
      }

  slidervol(wavesplayer0, wavesglueplayer0, wavesslider, wavesbackground);
  
  wavesslider.on( 'change', function( event, ui ) {
    slidervol(wavesplayer0, wavesglueplayer0, wavesslider, wavesbackground);
    remembervol(wavesslider, "lswaves");
  })
  
//    
  
  var lastthundervol = localStorage.getItem("lsthunder");
      if (typeof lastthundervol != "object"){ 
      
        if (lastthundervol > 0.02 && thunderContainer.hasClass("sliders-collapsed")  && urlvhex === null ) {
          expandSliderThunder(); // expand and load audio if localstorage volume > 0.02
        }
        
        if( lastthundervol <= 0.02 && thunderContainer.hasClass("sliders-expanded")  && urlvhex === null ) {
          collapseSliderThunder();
        }
      
        thunderslider.val(lastthundervol);
        thunderslider.slider("refresh");
      }

  slidervol(thunderplayer0, thunderglueplayer0, thunderslider, thunderbackground);
  
  thunderslider.on( 'change', function( event, ui ) {
    slidervol(thunderplayer0, thunderglueplayer0, thunderslider, thunderbackground);
    remembervol(thunderslider, "lsthunder");
  })
  
//
  var lastfirevol = localStorage.getItem("lsfire");
      if (typeof lastfirevol != "object"){ 
      
        if (lastfirevol > 0.02 && fireContainer.hasClass("sliders-collapsed") && urlvhex === null ) {
          expandSliderFire(); // expand and load audio if localstorage volume > 0.02
        }
        
        if( lastfirevol <= 0.02 && fireContainer.hasClass("sliders-expanded") && urlvhex === null ) {
          collapseSliderFire();
        }
      
        fireslider.val(lastfirevol);
        fireslider.slider("refresh");
      }

  slidervol(fireplayer0, fireglueplayer0, fireslider, firebackground);
  
  fireslider.on( 'change', function( event, ui ) {
    slidervol(fireplayer0, fireglueplayer0, fireslider, firebackground);
    remembervol(fireslider, "lsfire");
  })
//

 var lastbirdsvol = localStorage.getItem("lsbirds");
      if (typeof lastbirdsvol != "object"){ 
      
        if (lastbirdsvol > 0.02 && birdsContainer.hasClass("sliders-collapsed") && urlvhex === null ) {
          expandSliderBirds(); // expand and load audio if localstorage volume > 0.02
        }
        
        if( lastbirdsvol <= 0.02 && birdsContainer.hasClass("sliders-expanded") && urlvhex === null  ) {
          collapseSliderBirds();
        }        
      
        birdsslider.val(lastbirdsvol);
        birdsslider.slider("refresh");
      }

  slidervol(birdsplayer0, birdsglueplayer0, birdsslider, birdsbackground);
  
  birdsslider.on( 'change', function( event, ui ) {
    slidervol(birdsplayer0, birdsglueplayer0, birdsslider, birdsbackground);
    remembervol(birdsslider, "lsbirds");
  })

//

  var lasthumansvol = localStorage.getItem("lshumans");
      if (typeof lasthumansvol != "object"){ 
      
        if (lasthumansvol > 0.02 && humansContainer.hasClass("sliders-collapsed") && urlvhex === null ) {
          expandSliderHumans(); // expand and load audio if localstorage volume > 0.02
        }
        
        if( lasthumansvol <= 0.02 && humansContainer.hasClass("sliders-expanded") && urlvhex === null ) {
          collapseSliderHumans();
        }         
      
        humansslider.val(lasthumansvol);
        humansslider.slider("refresh");
      }

  slidervol(humansplayer0, humansglueplayer0, humansslider, humansbackground);
  
  humansslider.on( 'change', function( event, ui ) {
    slidervol(humansplayer0, humansglueplayer0, humansslider, humansbackground);
    remembervol(humansslider, "lshumans");
  })
  
//

 var lastcicadavol = localStorage.getItem("lscicada");
      if (typeof lastcicadavol != "object"){ 
        
        if (lastcicadavol > 0.02 && cicadaContainer.hasClass("sliders-collapsed")) {
          expandSliderCicada(); // expand and load audio if localstorage volume > 0.02
        }
        
        cicadaslider.val(lastcicadavol);
        cicadaslider.slider("refresh");
     }

  slidervol(cicadaplayer0, cicadaglueplayer0, cicadaslider, cicadabackground);
  
  cicadaslider.on( 'change', function( event, ui ) {
    slidervol(cicadaplayer0, cicadaglueplayer0, cicadaslider, cicadabackground);
    remembervol(cicadaslider, "lscicada");
  })     
  
// parameters to update audio by slider

  function sloop(player, otherPlayer, time) {
    if (player.currentTime >= time && otherPlayer.paused && !player.paused){
      otherPlayer.currentTime = 0;
      otherPlayer.play();
    }
  }
  
// function to fake seamless looping

  rainplayer.bind('timeupdate', function() {
    sloop(rainplayer0, rainglueplayer0, 294);
  })

  rainglueplayer.bind('timeupdate', function() {
    sloop(rainglueplayer0, rainplayer0, 5);
  })
  
  wavesplayer.bind('timeupdate', function() {
    sloop(wavesplayer0, wavesglueplayer0, 234);
  })

  wavesglueplayer.bind('timeupdate', function() {
    sloop(wavesglueplayer0, wavesplayer0, 5);
  })
  
  thunderplayer.bind('timeupdate', function() {
    sloop(thunderplayer0, thunderglueplayer0, 294);
  })

  thunderglueplayer.bind('timeupdate', function() {
    sloop(thunderglueplayer0, thunderplayer0, 5);
  })
  
  fireplayer.bind('timeupdate', function() {
    sloop(fireplayer0, fireglueplayer0, 234);
  })

  fireglueplayer.bind('timeupdate', function() {
    sloop(fireglueplayer0, fireplayer0, 5);
  })

  birdsplayer.bind('timeupdate', function() {
    sloop(birdsplayer0, birdsglueplayer0, 294);
  })

  birdsglueplayer.bind('timeupdate', function() {
    sloop(birdsglueplayer0, birdsplayer0, 5);
  })    
  
  humansplayer.bind('timeupdate', function() {
    sloop(humansplayer0, humansglueplayer0, 141);
  })

  humansglueplayer.bind('timeupdate', function() {
    sloop(humansglueplayer0, humansplayer0, 5);
  })
  
  cicadaplayer.bind('timeupdate', function() {
    sloop(cicadaplayer0, cicadaglueplayer0, 141);
  })

  cicadaglueplayer.bind('timeupdate', function() {
    sloop(cicadaglueplayer0, cicadaplayer0, 5);
  })  
    

// looping parameters for each sample

$('label').on('click', false);

// prevent tap bringing up input dialogue on mobile devices

var optionsbutton = $("#optionsbutton");

  $(".optionshidden").hide();
  $(".show_hide").show();
  
  $(".sharehidden").hide();
 
  $('.show_hide').click(function(){
    $(".optionshidden").fadeToggle( fadeInOutMs );
    
    var optionstext = optionsbutton.text();

    if( optionstext.indexOf( "Tools" ) !== -1 ) {
      optionsbutton.html('Hide <span class="hotkey">t</span>ools');
      optionsbutton.addClass("options-active");
    }
    else {
      optionsbutton.html('<span class="hotkey">T</span>ools');
      optionsbutton.removeClass("options-active");
    }
  });

  $('.sharetoggle').click(function(){
    $(".sharehidden").fadeToggle( fadeInOutMs );
  }); 

// reset: resets volume to defaults

function silenceall(slider) {
    slider.val(0);
    slider.slider("refresh");
}

silence.click(function(){
  silenceall(rainslider);
  silenceall(thunderslider);
  silenceall(fireslider);  
  silenceall(wavesslider);
  silenceall(birdsslider);  
  silenceall(humansslider);
  silenceall(cicadaslider);  
})
    
// silence: sets all sliders to 0

  function mstotime(inputms) {
    var ms = inputms % 1000;
    inputms = (inputms - ms) / 1000;
    var secs = inputms % 60;
    inputms = (inputms - secs) / 60;
    var mins = inputms % 60;
    var hrs = (inputms - mins) / 60;
    
    
    if (hrs>1){
      return hrs + ' hours, ' + mins + ' minutes and ' + secs + ' seconds';
    }
    
    if (hrs==1){
      return hrs + ' hour, ' + mins + ' minutes and ' + secs + ' seconds';
    }    
    
    if (hrs<1){
      if (mins>1){
        return mins + ' minutes and ' + secs + ' seconds';
      }
      if (mins==1){
        return mins + ' minute and ' + secs + ' seconds';
      }
      if (mins<1){
        return secs + ' seconds';
      }
    }

  }

// convert ms to time for functions below

var timedpauseprompt = $("#timedpauseprompt");
var timedpausenumberentry = $("#timedpausenumberentry");
var timedpauseentry = $("#timedpauseentry");

timedpauseprompt.click( function() {
  
  if ( $(this).hasClass("wait-for-input") ) {
    timedpausenumberentry.hide();
    timedpauseentry.hide();
    $(this).removeClass("wait-for-input");
    timedfadepre.fadeIn( fadeInOutMs )
    timedstartpre.fadeIn( fadeInOutMs )
    buttonoptions.fadeIn( fadeInOutMs )
    $(this).text("Timed pause");
    optionsbutton.fadeIn( fadeInOutMs )
  }
  else {
    timedpausenumberentry.fadeIn( fadeInOutMs )
    timedpauseentry.fadeIn( fadeInOutMs )
    $(this).addClass("wait-for-input");
   
    timedfadepre.hide();
    timedstartpre.hide();    
    buttonoptions.hide();
    $(this).html("<span id='tp-cancel-shortcut'>C</span>ancel");
    optionsbutton.hide();
    $("#minutestillpause").focus();
    
    var timedPausePromptStart = function () {
                                  tpbutton.trigger( "click" ); 
                                  $(document).unbind('keydown', timedPausePromptStart );                            
                                };
    
    $(document).bind('keydown', 'return', timedPausePromptStart);
    $('#minutestillpause').bind('keydown', 'return', timedPausePromptStart);
   
  }
  
  
});

tpbutton.click(function(){

  optionsbutton.fadeIn( fadeInOutMs );
  
  var pauseminutes = $("input#minutestillpause").val();
  var pausems = pauseminutes * 60000;
  var starttime = mstotime(pausems);
 
  timedpausepre.hide();
  timedfadepre.hide();
  timedstartpre.hide();  
  buttonoptions.hide();
  timedpausenumberentry.hide();
  timedpauseentry.hide();
  timedpauseprompt.removeClass("wait-for-input");
  
  $("#timedpauseminutesleft").text(starttime); // set the start time for the first second
  timedpausepost.fadeIn( fadeInOutMs );
 
 if(ppbutton.hasClass('play-all')) {
     playall();               
     ppbutton.attr("class", "pause-all");
  }
 
  var pausetimeout = setTimeout(function(){timedpausefunction()},pausems);
 
  function timedpausefunction(){
    pauseall();
    ppbutton.attr("class", "play-all");
    timedpausepre.fadeIn( fadeInOutMs );
    timedpausepost.hide();
    timedfadepre.fadeIn( fadeInOutMs );
    timedstartpre.fadeIn( fadeInOutMs );
    buttonoptions.fadeIn( fadeInOutMs );
 }
  
  var timeupdate = setInterval(function(){timerupdate()},1000);
  
  function timerupdate(){
    pausems = pausems - 1000;
    var timeleft = mstotime(pausems);
    $("#timedpauseminutesleft").text(timeleft);
      if (pausems <= 0){
        clearInterval(timeupdate);
        timedpauseprompt.text("Timed pause");
        optionsbutton.show();
      }
  }
  
 canceltp.click(function(){
  clearTimeout(pausetimeout);
  clearInterval(timeupdate);
  timedpausepre.fadeIn( fadeInOutMs );
  timedpausepost.hide();
  timedfadepre.fadeIn( fadeInOutMs );
  timedstartpre.fadeIn( fadeInOutMs );  
  buttonoptions.fadeIn( fadeInOutMs );
  timedpauseprompt.text("Timed pause");
  optionsbutton.fadeIn( fadeInOutMs );
 })

})


// timed pause: pauses after x minutes


var timedstartprompt = $("#timedstartprompt");
var timedstartnumberentry = $("#timedstartnumberentry");
var timedstartentry = $("#timedstartentry");

timedstartprompt.click( function() {
  
  if ( $(this).hasClass("wait-for-input") ) {
    timedstartnumberentry.hide();
    timedstartentry.hide();
    $(this).removeClass("wait-for-input");
    timedfadepre.fadeIn( fadeInOutMs )
    timedpausepre.fadeIn( fadeInOutMs )
    buttonoptions.fadeIn( fadeInOutMs )
    $(this).text("Timed start");
    optionsbutton.fadeIn( fadeInOutMs )
  }
  else {
    timedstartnumberentry.fadeIn( fadeInOutMs )
    timedstartentry.fadeIn( fadeInOutMs )
    $(this).addClass("wait-for-input");
   
    timedfadepre.hide();
    timedpausepre.hide();    
    buttonoptions.hide();
    $(this).html("<span id='tp-cancel-shortcut'>C</span>ancel");
    optionsbutton.hide();
    $("#minutestillstart").focus();
    
    var timedstartPromptStart = function () {
                                  tsbutton.trigger( "click" ); 
                                  $(document).unbind('keydown', timedstartPromptStart );                            
                                };
    
    $(document).bind('keydown', 'return', timedstartPromptStart);
    $('#minutestillstart').bind('keydown', 'return', timedstartPromptStart);
   
  }
  
  
});

tsbutton.click(function(){

  optionsbutton.fadeIn( fadeInOutMs );
  
  var startminutes = $("input#minutestillstart").val();
  var startms = startminutes * 60000;
  var starttime = mstotime(startms);
 
  timedstartpre.hide();
  timedfadepre.hide();
  timedpausepre.hide();  
  buttonoptions.hide();
  timedstartnumberentry.hide();
  timedstartentry.hide();
  timedstartprompt.removeClass("wait-for-input");
  
  $("#timedstartminutesleft").text(starttime); // set the start time for the first second
  timedstartpost.fadeIn( fadeInOutMs );
 
 if(ppbutton.hasClass('pause-all')) {
     pauseall();               
     ppbutton.attr("class", "play-all");
  }
 
  var starttimeout = setTimeout(function(){timedstartfunction()}, startms);
 
  function timedstartfunction(){
    playall();
    ppbutton.attr("class", "pause-all");
    timedstartpre.fadeIn( fadeInOutMs );
    timedstartpost.hide();
    timedfadepre.fadeIn( fadeInOutMs );
    timedpausepre.fadeIn( fadeInOutMs );
    buttonoptions.fadeIn( fadeInOutMs );
 }
  
  var timeupdate = setInterval(function(){timerupdate()},1000);
  
  function timerupdate(){
    startms = startms - 1000;
    var timeleft = mstotime(startms);
    $("#timedstartminutesleft").text(timeleft);
      if (startms <= 0){
        clearInterval(timeupdate);
        timedstartprompt.text("Alarm");
        optionsbutton.show();
      }
  }
  
 cancelts.click(function(){
  clearTimeout(starttimeout);
  clearInterval(timeupdate);
  timedstartpre.fadeIn( fadeInOutMs );
  timedstartpost.hide();
  timedfadepre.fadeIn( fadeInOutMs );
  timedpausepre.fadeIn( fadeInOutMs );  
  buttonoptions.fadeIn( fadeInOutMs );
  timedstartprompt.text("Alarm");
  optionsbutton.fadeIn( fadeInOutMs );
 })

})


// timed pause: pauses after x minutes

var timedfadeprompt = $("#timedfadeprompt");
var timedfadenumberentry = $("#timedfadenumberentry");
var timedfadeentry = $("#timedfadeentry");

timedfadeprompt.click( function() {

  if ( $(this).hasClass("wait-for-input") ) {
    timedfadenumberentry.hide();
    timedfadeentry.hide();
    $(this).removeClass("wait-for-input");
    timedfadepre.fadeIn( fadeInOutMs );
    timedpausepre.fadeIn( fadeInOutMs );
    timedstartpre.fadeIn( fadeInOutMs );
    buttonoptions.fadeIn( fadeInOutMs );
    $(this).text("Timed fade to silence");
    optionsbutton.fadeIn( fadeInOutMs );
  }
  else {
    timedfadenumberentry.fadeIn( fadeInOutMs );
    timedfadeentry.fadeIn( fadeInOutMs );
    $(this).addClass("wait-for-input");
   
    timedpausepre.hide();
    timedstartpre.hide();
    buttonoptions.hide();
    $(this).text("Cancel");
    optionsbutton.hide();
    $("#minutestillfade").focus();
    
    var timedFadePromptStart = function () {
                                  tfbutton.trigger( "click" ); 
                                  $(document).unbind('keydown', timedFadePromptStart );
                                  console.log("pressed return");                            
                                };
                                
    $(document).bind('keydown', 'return', timedFadePromptStart);
    $('#minutestillfade').bind('keydown', 'return', timedFadePromptStart);
  }

});

tfbutton.click(function(){

  optionsbutton.fadeIn( fadeInOutMs );

  var fademinutes = $("input#minutestillfade").val();
  var fadems = fademinutes * 60000;
  var fadesecs = fadems / 1000;  
  var fadedecisecs = fadesecs * 10;
  var fadestarttime = mstotime(fadems);
  
  var rainval = rainslider.val();
  var rainco = rainslider.val() / fadedecisecs;
  
  var thunderval = thunderslider.val();  
  var thunderco = thunderslider.val() / fadedecisecs;
  
  var fireval = fireslider.val();
  var fireco = fireslider.val() / fadedecisecs;

  var wavesval = wavesslider.val();
  var wavesco = wavesslider.val() / fadedecisecs;

  var birdsval = birdsslider.val();
  var birdsco = birdsslider.val() / fadedecisecs;

  var humansval = humansslider.val();
  var humansco = humansslider.val() / fadedecisecs;
  
  var cicadaval = cicadaslider.val();
  var cicadaco = cicadaslider.val() / fadedecisecs;  
 
  timedpausepre.hide();
  timedstartpre.hide();
  timedfadepre.hide();
  buttonoptions.hide();
  $("#timedfademinutesleft").text(fadestarttime); // set the start time for the first second
  timedfadepost.fadeIn( fadeInOutMs );
  timedfadenumberentry.hide();
  timedfadeentry.hide();
  timedfadeprompt.removeClass("wait-for-input");  
 
 if(ppbutton.hasClass('play-all')) {
     playall();               
     ppbutton.attr("class", "pause-all");
  }
  
  var fadetimeout = setInterval(function(){timedfadefunction()},100);
  
  function timedfadefunction(){
  
    fadems = fadems - 100;
    var fadetimeleft = mstotime(fadems);
    $("#timedfademinutesleft").text(fadetimeleft);
    
    rainval = rainval - rainco;
    rainslider.val(rainval);
    rainslider.slider("refresh");
    
    thunderval = thunderval - thunderco;
    thunderslider.val(thunderval);
    thunderslider.slider("refresh");
    
    fireval = fireval - fireco;
    fireslider.val(fireval);
    fireslider.slider("refresh");
    
    wavesval = wavesval - wavesco;
    wavesslider.val(wavesval);
    wavesslider.slider("refresh");
    
    birdsval = birdsval - birdsco;
    birdsslider.val(birdsval);
    birdsslider.slider("refresh");
    
    humansval = humansval - humansco;
    humansslider.val(humansval);
    humansslider.slider("refresh"); 
    
    cicadaval = cicadaval - cicadaco;
    cicadaslider.val(cicadaval);
    cicadaslider.slider("refresh");     
    
    if (fadems <= 0){
      clearInterval(fadetimeout);
      timedpausepre.fadeIn( fadeInOutMs );
      timedstartpre.fadeIn( fadeInOutMs );
      timedfadepre.fadeIn( fadeInOutMs );
      buttonoptions.fadeIn( fadeInOutMs );
      timedfadepost.hide();
      timedfadeprompt.text("Timed fade to silence");
      optionsbutton.fadeIn( fadeInOutMs );    
    }
  }
  
  canceltf.click(function(){
  clearInterval(fadetimeout);
  timedpausepre.fadeIn( fadeInOutMs );
  timedstartpre.fadeIn( fadeInOutMs );
  timedfadepost.hide();
  timedfadepre.fadeIn( fadeInOutMs );
  buttonoptions.fadeIn( fadeInOutMs );
  timedfadeprompt.text("Timed fade to silence");
  optionsbutton.show();  
  })
      
})

// timed fade: fade all to silence over x minutes
// end of code for options menu

if(urlvhex !== null){

  var queryvolumes = urlvhex.match(/.{1,2}/g) // split query string into array of 2char values
// note to self: this is what an array is
  
  var queryrainvolume = parseInt(queryvolumes[0], 16) / 100;

  if( queryrainvolume > 0.02 && rainContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderRain();
  }  
  
 if( queryrainvolume <= 0.02 && rainContainer.hasClass( 'sliders-expanded' ) ) {
    collapseSliderRain();
  }
  
  rainslider.val(queryrainvolume);
  rainslider.slider("refresh");   
  
  
//  
  
  
  var querythundervolume = parseInt(queryvolumes[1], 16) / 100;

  if( querythundervolume > 0.02 && thunderContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderThunder();
  }  
  
  if( querythundervolume <= 0.02 && thunderContainer.hasClass( 'sliders-expanded' ) ) {
    collapseSliderThunder();
  }
  
  thunderslider.val(querythundervolume);
  thunderslider.slider("refresh");   
  
  
//  
  
  var queryfirevolume = parseInt(queryvolumes[0], 16) / 100;

  if( queryfirevolume > 0.02 && fireContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderFire();
  }  
  
 if( queryfirevolume <= 0.02 && fireContainer.hasClass( 'sliders-expanded' ) ) {
    collapseSliderFire();
  }
  
  fireslider.val(queryfirevolume);
  fireslider.slider("refresh");   
  
//  
  
  var querywavesvolume = parseInt(queryvolumes[0], 16) / 100;

  if( querywavesvolume > 0.02 && wavesContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderWaves();
  }  
  
 if( querywavesvolume <= 0.02 && wavesContainer.hasClass( 'sliders-expanded' ) ) {
    collapseSliderWaves();
  }
  
  wavesslider.val(querywavesvolume);
  wavesslider.slider("refresh");   
  
//  
  
  var querybirdsvolume = parseInt(queryvolumes[4], 16) / 100;

  if( querybirdsvolume > 0.02 && birdsContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderBirds();
  }  
  
  if( querybirdsvolume <= 0.02 && birdsContainer.hasClass( 'sliders-expanded' ) ) {
    collapseSliderBirds();
  }
  
  birdsslider.val(querybirdsvolume);
  birdsslider.slider("refresh");   
   
//  
  
  var queryhumansvolume = parseInt(queryvolumes[5], 16) / 100;

  if( queryhumansvolume > 0.02 && humansContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderHumans();
  }  
  
  if( queryhumansvolume <= 0.02 && humansContainer.hasClass( 'sliders-expanded' ) ) {
    collapseSliderHumans();
  }
  
  humansslider.val(queryhumansvolume);
  humansslider.slider("refresh");   
  
//  
  
  var querycicadavolume = parseInt(queryvolumes[6], 16) / 100;
  
  if( querycicadavolume > 0.02 && cicadaContainer.hasClass( 'sliders-collapsed' ) ) { 
    expandSliderCicada();
  }
  
  cicadaslider.val(querycicadavolume);
  cicadaslider.slider("refresh");    
}

// if query string is present, set sliders to value in string
// this section will always set the volume using query string, if present.

var share = $("#share");
var showshareurl = $("#showshareurl");

share.click( function() {

  var sharetext = share.text()

  if( sharetext.indexOf( "Share" ) !== -1 ) {
    share.text("Hide");
  }
  else {
    share.text("Share your mix");
  }

  var raindec = Math.round(rainslider.val() * 100);
  var rainhex = raindec.toString(16);
  if (rainhex.length < 2) {
    rainhex = "0" + rainhex;
  }
  
  var thunderdec = Math.round(thunderslider.val() * 100);
  var thunderhex = thunderdec.toString(16);
  if (thunderhex.length < 2) {
    thunderhex = "0" + thunderhex;
  }
  
  var firedec = Math.round(fireslider.val() * 100);
  var firehex = firedec.toString(16);
  if (firehex.length < 2) {
    firehex = "0" + firehex;
  }
  
  var wavesdec = Math.round(wavesslider.val() * 100);
  var waveshex = wavesdec.toString(16);
  if (waveshex.length < 2) {
    waveshex = "0" + waveshex;
  }
  
  var birdsdec = Math.round(birdsslider.val() * 100);
  var birdshex = birdsdec.toString(16);
  if (birdshex.length < 2) {
    birdshex = "0" + birdshex;
  }
  
  var humansdec = Math.round(humansslider.val() * 100);
  var humanshex = humansdec.toString(16);
  if (humanshex.length < 2) {
    humanshex = "0" + humanshex;
  }        
  
  var cicadadec = Math.round(cicadaslider.val() * 100);
  var cicadahex = cicadadec.toString(16);
  if (cicadahex.length < 2) {
    cicadahex = "0" + cicadahex;
  }     

  var hexquery = rainhex + thunderhex + firehex + waveshex + birdshex + humanshex + cicadahex
  var hexurl = "http://asoftmurmur.com/?v=" + hexquery
  
  showshareurl.text(hexurl);
  
  var facebooklink = $("#facebooklink");
  var twitterlink = $("#twitterlink");  
  var googlepluslink = $("#googlepluslink");
  
  facebooklink.attr("href", "http://www.facebook.com/sharer/sharer.php?s=100&p[url]=" + hexurl + "&p[images][0]=&p[title]=My%20ambient%20noise%20mix%20at%20A%20Soft%20Murmur&p[summary]=I%20made%20this%20mix%20of%20ambient%20sounds%20at%20asoftmurmur.com%20-%20Check%20it%20out!");
  twitterlink.attr("href", "http://twitter.com/home?status=Check%20out%20my%20custom%20ambient%20noise%20mix:%20asoftmurmur.com/%3Fv%3D" + hexquery + "%20@asoftmurmur");
  googlepluslink.attr("href", "https://plus.google.com/share?url=" + hexurl);
})


// write url with query string when called
//write social urls

$(document).bind('keydown', 'space', function() {

  event.preventDefault();
  ppbutton.trigger( "click" );
  
});

$(document).bind('keydown', 't', function() {

  event.preventDefault();
  optionsbutton.trigger( "click" );

});
      

// keyboard shortcut support


  if( urlvhex === null && typeof lastrainvol === "object" ){
  
    expandSliderRain();
    expandSliderThunder();
    expandSliderFire();
  
  }
  
  else {
  }
  
// load default sounds if there's no query string and no local storage  
  
  remembervol(rainslider, "lsrain");
  remembervol(thunderslider, "lsthunder");
  remembervol(fireslider, "lsfire");
  
// set localstorage immediately so we'll know user has been before, 
// even if they don't touch the sliders





rainglueplayer0.addEventListener("canplaythrough", function() {
    rainLoaded = 1;
});

//

thunderglueplayer0.addEventListener("canplaythrough", function() {
    thunderLoaded = 1;
});

//

fireglueplayer0.addEventListener("canplaythrough", function() {
    fireLoaded = 1;
});

//

wavesglueplayer0.addEventListener("canplaythrough", function() {
    wavesLoaded = 1;
});

//

birdsglueplayer0.addEventListener("canplaythrough", function() {
    birdsLoaded = 1;
});

//

humansglueplayer0.addEventListener("canplaythrough", function() {
    humansLoaded = 1;
});


//

cicadaglueplayer0.addEventListener("canplaythrough", function() {
    cicadaLoaded = 1;
});




//

var numItems = $('.excount').length;

var loadtimeout = setInterval(function(){timedloadfunction()}, 50);
var loadCounter= 0;

function timedloadfunction() {

  if ( rainLoaded + thunderLoaded + fireLoaded + wavesLoaded + birdsLoaded + humansLoaded + cicadaLoaded === numItems ) {
    
    $("#loading").hide(); 
    $("#all-controls").fadeIn( fadeInOutMs ); 
    clearInterval(loadtimeout);   
  }
  
  ++loadCounter;
  console.log(loadCounter);
  
  if (loadCounter >= 100) {
    $("#loading").hide(); 
    $("#all-controls").fadeIn( fadeInOutMs );
    clearInterval(loadtimeout);
  }
}


ppbutton.click(function(){
    if($(this).hasClass('play-all')) {
      playall();               
      $(this).attr("class", "pause-all");
    }
    else {
      pauseall();            
      $(this).attr("class", "play-all");
    }
})





//
//  $("#loading").hide(); 
//  $("#all-controls").css("display", "inline");
//
//  ppbutton.click(function(){
//     if($(this).hasClass('play-all')) {
//       playall();               
//        $(this).attr("class", "pause-all");
//      }
//      else {
//        pauseall();            
//        $(this).attr("class", "play-all");
//      }
//  })
// 

// TEST MEANDER CODE BELOW HERE

var meanderButton = $("#meander");
var cancelmeander = $("#cancelmeander"); 
var meanderSlider = $("#meander-slider");
var meanderSliderValue = (1000 - meanderSlider.val() );
var meanderSliderValueStart = meanderSliderValue;
var meanderSpeedText = $("#meander-speed")

meanderSlider.on( 'change', function( event, ui ) {
  meanderSliderValue = (1000 - meanderSlider.val() );
  if (meanderSliderValue != meanderSliderValueStart) {
  
    console.log("meanderSliderValue = " + meanderSliderValue);
    if (meanderSliderValue === 500) {
      var coin500 = Math.random();
      if ( coin500 > 0.666 ) {
        meanderSpeedText.text("steadily");
      }
      else if ( coin500 <= 0.666 && coin500 > 0.333 ) {
        meanderSpeedText.text("at a relaxed pace");
      }
      else if ( coin500 <= 0.333 ) {
        meanderSpeedText.text("evenly");
      }
    }
    
    else if (meanderSliderValue === 300) {
      var coin300 = Math.random();
      if ( coin300 > 0.666 ) {
        meanderSpeedText.text("swiftly");
      }
      else if ( coin300 <= 0.666 && coin300 > 0.333) {
        meanderSpeedText.text("quickly");
      }
      else if ( coin300 <= 0.333 ) {
        meanderSpeedText.text("briskly");
      }
    }
    
    else if (meanderSliderValue === 100) {
      var coin100 = Math.random();
      if ( coin100 > 0.666 ) {
        meanderSpeedText.text("at great speed");
      }
      else if ( coin100 <= 0.666 && coin100 > 0.333) {
        meanderSpeedText.text("with haste");
      }
      else if ( coin100 <= 0.333 ) {
        meanderSpeedText.text("most rapidly");
      }
    }
    
     else if (meanderSliderValue === 700) {
      var coin700 = Math.random();
      if ( coin700 > 0.666 ) {
        meanderSpeedText.text("gently");
      }
      else if ( coin700 <= 0.666 && coin700 > 0.333) {
        meanderSpeedText.text("easily");
      }
      else if ( coin700 <= 0.333 ) {
        meanderSpeedText.text("softly");
      }
    }
    
     else if (meanderSliderValue === 900) {
      var coin900 = Math.random();
      if ( coin900 > 0.666 ) {
        meanderSpeedText.text("ever so slightly");
      }
      else if ( coin900 <= 0.666 && coin900 > 0.333) {
        meanderSpeedText.text("in a slow arc");
      }
      else if ( coin900 <= 0.333 ) {
        meanderSpeedText.text("in sedate curves");
      }
    }
  }
  
  meanderSliderValueStart = meanderSliderValue;
  
});

   

meanderButton.click( function() { 

  cancelmeander.click(function(){
    clearInterval(meanderFunction);
    timedpausepre.fadeIn( fadeInOutMs )
    timedpausepost.hide();
    timedstartpre.fadeIn( fadeInOutMs )
    timedstartpost.hide();
    timedfadepre.fadeIn( fadeInOutMs )
    buttonoptions.fadeIn( fadeInOutMs )
    meanderpost.hide();
    meanderSlider.val(500);
    meanderSlider.slider("refresh");    
    
  });

  timedpausepre.hide();
  timedstartpre.hide();
  timedfadepre.hide();
  buttonoptions.hide();
  meanderpost.fadeIn( fadeInOutMs );
  
//  

  var rainStart = Math.round(rainslider.val() * 1000) / 1000;
  // console.log("rainStart = " + rainStart);

  var rainHigh =  Math.round( ((1 + rainStart) / 2) * 1000) / 1000;
  // console.log("rainHigh = " + rainHigh);
  
  var rainHighHalf = Math.round( ((rainStart + rainHigh) / 2) * 1000) / 1000;
  
  var rainHighInterval = Math.round( ((rainHigh - rainStart) / 100) * 1000) / 1000;
  // console.log("high interval = " + rainHighInterval);

  var rainLow = Math.round( (rainStart / 2) * 1000) / 1000 ;
  // console.log("rainLow = " + rainLow);
  
  var rainLowHalf = Math.round( ((rainStart + rainLow) / 2) * 1000) / 1000;
  // console.log("rainLowHalf = " + rainLowHalf);
  
  var rainLowInterval = Math.round( ((rainStart - rainLow) / 100) * 1000) / 1000;
  // console.log("low interval = " + rainLowInterval);

  var rainFlip = 0;
  
//

  var thunderStart = Math.round(thunderslider.val() * 1000) / 1000;
  // console.log("thunderStart = " + thunderStart);

  var thunderHigh =  Math.round( ((1 + thunderStart) / 2) * 1000) / 1000;
  // console.log("thunderHigh = " + thunderHigh);
  
  var thunderHighHalf = Math.round( ((thunderStart + thunderHigh) / 2) * 1000) / 1000;
  
  var thunderHighInterval = Math.round( ((thunderHigh - thunderStart) / 100) * 1000) / 1000;
  // console.log("high interval = " + thunderHighInterval);

  var thunderLow = Math.round( (thunderStart / 2) * 1000) / 1000 ;
  // console.log("thunderLow = " + thunderLow);
  
  var thunderLowHalf = Math.round( ((thunderStart + thunderLow) / 2) * 1000) / 1000;
  // console.log("thunderLowHalf = " + thunderLowHalf);
  
  var thunderLowInterval = Math.round( ((thunderStart - thunderLow) / 100) * 1000) / 1000;
  // console.log("low interval = " + thunderLowInterval);

  var thunderFlip = 0;
  
//

  var fireStart = Math.round(fireslider.val() * 1000) / 1000;
  // console.log("fireStart = " + fireStart);

  var fireHigh =  Math.round( ((1 + fireStart) / 2) * 1000) / 1000;
  // console.log("fireHigh = " + fireHigh);
  
  var fireHighHalf = Math.round( ((fireStart + fireHigh) / 2) * 1000) / 1000;
  
  var fireHighInterval = Math.round( ((fireHigh - fireStart) / 100) * 1000) / 1000;
  // console.log("high interval = " + fireHighInterval);

  var fireLow = Math.round( (fireStart / 2) * 1000) / 1000 ;
  // console.log("fireLow = " + fireLow);
  
  var fireLowHalf = Math.round( ((fireStart + fireLow) / 2) * 1000) / 1000;
  // console.log("fireLowHalf = " + fireLowHalf);
  
  var fireLowInterval = Math.round( ((fireStart - fireLow) / 100) * 1000) / 1000;
  // console.log("low interval = " + fireLowInterval);

  var fireFlip = 0;
  
//

  var wavesStart = Math.round(wavesslider.val() * 1000) / 1000;
  // console.log("wavesStart = " + wavesStart);

  var wavesHigh =  Math.round( ((1 + wavesStart) / 2) * 1000) / 1000;
  // console.log("wavesHigh = " + wavesHigh);
  
  var wavesHighHalf = Math.round( ((wavesStart + wavesHigh) / 2) * 1000) / 1000;
  
  var wavesHighInterval = Math.round( ((wavesHigh - wavesStart) / 100) * 1000) / 1000;
  // console.log("high interval = " + wavesHighInterval);

  var wavesLow = Math.round( (wavesStart / 2) * 1000) / 1000 ;
  // console.log("wavesLow = " + wavesLow);
  
  var wavesLowHalf = Math.round( ((wavesStart + wavesLow) / 2) * 1000) / 1000;
  // console.log("wavesLowHalf = " + wavesLowHalf);
  
  var wavesLowInterval = Math.round( ((wavesStart - wavesLow) / 100) * 1000) / 1000;
  // console.log("low interval = " + wavesLowInterval);

  var wavesFlip = 0;
  
//

  var birdsStart = Math.round(birdsslider.val() * 1000) / 1000;
  // console.log("birdsStart = " + birdsStart);

  var birdsHigh =  Math.round( ((1 + birdsStart) / 2) * 1000) / 1000;
  // console.log("birdsHigh = " + birdsHigh);
  
  var birdsHighHalf = Math.round( ((birdsStart + birdsHigh) / 2) * 1000) / 1000;
  
  var birdsHighInterval = Math.round( ((birdsHigh - birdsStart) / 100) * 1000) / 1000;
  // console.log("high interval = " + birdsHighInterval);

  var birdsLow = Math.round( (birdsStart / 2) * 1000) / 1000 ;
  // console.log("birdsLow = " + birdsLow);
  
  var birdsLowHalf = Math.round( ((birdsStart + birdsLow) / 2) * 1000) / 1000;
  // console.log("birdsLowHalf = " + birdsLowHalf);
  
  var birdsLowInterval = Math.round( ((birdsStart - birdsLow) / 100) * 1000) / 1000;
  // console.log("low interval = " + birdsLowInterval);

  var birdsFlip = 0;
  
//

  var humansStart = Math.round(humansslider.val() * 1000) / 1000;
  // console.log("humansStart = " + humansStart);

  var humansHigh =  Math.round( ((1 + humansStart) / 2) * 1000) / 1000;
  // console.log("humansHigh = " + humansHigh);
  
  var humansHighHalf = Math.round( ((humansStart + humansHigh) / 2) * 1000) / 1000;
  
  var humansHighInterval = Math.round( ((humansHigh - humansStart) / 100) * 1000) / 1000;
  // console.log("high interval = " + humansHighInterval);

  var humansLow = Math.round( (humansStart / 2) * 1000) / 1000 ;
  // console.log("humansLow = " + humansLow);
  
  var humansLowHalf = Math.round( ((humansStart + humansLow) / 2) * 1000) / 1000;
  // console.log("humansLowHalf = " + humansLowHalf);
  
  var humansLowInterval = Math.round( ((humansStart - humansLow) / 100) * 1000) / 1000;
  // console.log("low interval = " + humansLowInterval);

  var humansFlip = 0;
  
//                 
  


  var meanderFunction = setInterval( meanderActualFunction, meanderSliderValue);
  
  
  
  function meanderActualFunction() {
    if ( $("#play-pause-button").hasClass('pause-all') ) {
    
      if ( rainContainer.hasClass( 'sliders-expanded' ) && rainStart > 0.02 ) {

        var rainCurrentVol = rainslider.val();
        var rainCurrentVolNum = parseFloat( rainCurrentVol );
        
        if ( rainCurrentVolNum === rainStart ) {
          rainFlip = 0;
          var coin = Math.random();
          if ( coin <= 0.5 ) {
            rainslider.val(rainCurrentVolNum - rainLowInterval);
          } else {
            rainslider.val(rainCurrentVolNum + rainHighInterval);
          }
        } else if ( rainCurrentVolNum <= (rainLowHalf + (rainLowInterval/2) ) && rainCurrentVolNum >= (rainLowHalf - rainLowInterval/2) && rainFlip == 0) {
          var rainLowHalfCoin = Math.random();
          if ( rainLowHalfCoin <= 0.5 ) {
            rainFlip = 1;
          }
          else {
            rainslider.val(rainCurrentVolNum - rainLowInterval)  
          }
        } else if ( rainCurrentVolNum <= rainLow) {
          rainFlip = 1;
          rainslider.val(rainLow + rainLowInterval);
        } else if ( rainCurrentVolNum <= (rainHighHalf + (rainHighInterval/2) ) && rainCurrentVolNum >= (rainHighHalf - rainHighInterval/2) && rainFlip == 0) {
          var rainHighHalfCoin = Math.random();
          console.log ("halfway and rainHighhalfcoin is " + rainHighHalfCoin);
          if ( rainHighHalfCoin >= 0.5 ) {
            rainFlip = 1;
          } else {
            rainslider.val(rainCurrentVolNum + rainHighInterval); 
          }
        } else if ( rainCurrentVolNum >= rainHigh ) {
          rainFlip = 1;
          rainslider.val(rainCurrentVolNum - rainHighInterval);
        } else if ( rainCurrentVolNum < rainStart && rainCurrentVolNum > rainLow && rainFlip == 0 ) {
          rainslider.val(rainCurrentVolNum - rainLowInterval);  
        } else if ( rainCurrentVolNum < rainStart && rainCurrentVolNum > rainLow && rainFlip == 1 ) {
          rainslider.val(rainCurrentVolNum + rainLowInterval);
        } else if ( rainCurrentVolNum > rainStart && rainFlip == 0 ) {
          rainslider.val(rainCurrentVolNum + rainHighInterval);     
        } else if ( rainCurrentVolNum > rainStart && rainFlip == 1 ) {
          rainslider.val(rainCurrentVolNum - rainHighInterval);    
        }
      rainslider.slider("refresh"); 
      }
      
      //
      
      if ( thunderContainer.hasClass( 'sliders-expanded' ) && thunderStart > 0.02 ) {

        var thunderCurrentVol = thunderslider.val();
        var thunderCurrentVolNum = parseFloat( thunderCurrentVol );
        
        if ( thunderCurrentVolNum === thunderStart ) {
          thunderFlip = 0;
          var coin = Math.random();
          if ( coin <= 0.5 ) {
            thunderslider.val(thunderCurrentVolNum - thunderLowInterval);
          } else {
            thunderslider.val(thunderCurrentVolNum + thunderHighInterval);
          }
        } else if ( thunderCurrentVolNum <= (thunderLowHalf + (thunderLowInterval/2) ) && thunderCurrentVolNum >= (thunderLowHalf - thunderLowInterval/2) && thunderFlip == 0) {
          var thunderLowHalfCoin = Math.random();
          if ( thunderLowHalfCoin <= 0.5 ) {
            thunderFlip = 1;
          }
          else {
            thunderslider.val(thunderCurrentVolNum - thunderLowInterval)  
          }
        } else if ( thunderCurrentVolNum <= thunderLow) {
          thunderFlip = 1;
          thunderslider.val(thunderLow + thunderLowInterval);
        } else if ( thunderCurrentVolNum <= (thunderHighHalf + (thunderHighInterval/2) ) && thunderCurrentVolNum >= (thunderHighHalf - thunderHighInterval/2) && thunderFlip == 0) {
          var thunderHighHalfCoin = Math.random();
          console.log ("halfway and thunderHighhalfcoin is " + thunderHighHalfCoin);
          if ( thunderHighHalfCoin >= 0.5 ) {
            thunderFlip = 1;
          } else {
            thunderslider.val(thunderCurrentVolNum + thunderHighInterval); 
          }
        } else if ( thunderCurrentVolNum >= thunderHigh ) {
          thunderFlip = 1;
          thunderslider.val(thunderCurrentVolNum - thunderHighInterval);
        } else if ( thunderCurrentVolNum < thunderStart && thunderCurrentVolNum > thunderLow && thunderFlip == 0 ) {
          thunderslider.val(thunderCurrentVolNum - thunderLowInterval);  
        } else if ( thunderCurrentVolNum < thunderStart && thunderCurrentVolNum > thunderLow && thunderFlip == 1 ) {
          thunderslider.val(thunderCurrentVolNum + thunderLowInterval);
        } else if ( thunderCurrentVolNum > thunderStart && thunderFlip == 0 ) {
          thunderslider.val(thunderCurrentVolNum + thunderHighInterval);     
        } else if ( thunderCurrentVolNum > thunderStart && thunderFlip == 1 ) {
          thunderslider.val(thunderCurrentVolNum - thunderHighInterval);    
        }
      thunderslider.slider("refresh"); 
      }
      
      //
      
      if ( fireContainer.hasClass( 'sliders-expanded' ) && fireStart > 0.02 ) {

        var fireCurrentVol = fireslider.val();
        var fireCurrentVolNum = parseFloat( fireCurrentVol );
        
        if ( fireCurrentVolNum === fireStart ) {
          fireFlip = 0;
          var coin = Math.random();
          if ( coin <= 0.5 ) {
            fireslider.val(fireCurrentVolNum - fireLowInterval);
          } else {
            fireslider.val(fireCurrentVolNum + fireHighInterval);
          }
        } else if ( fireCurrentVolNum <= (fireLowHalf + (fireLowInterval/2) ) && fireCurrentVolNum >= (fireLowHalf - fireLowInterval/2) && fireFlip == 0) {
          var fireLowHalfCoin = Math.random();
          if ( fireLowHalfCoin <= 0.5 ) {
            fireFlip = 1;
          }
          else {
            fireslider.val(fireCurrentVolNum - fireLowInterval)  
          }
        } else if ( fireCurrentVolNum <= fireLow) {
          fireFlip = 1;
          fireslider.val(fireLow + fireLowInterval);
        } else if ( fireCurrentVolNum <= (fireHighHalf + (fireHighInterval/2) ) && fireCurrentVolNum >= (fireHighHalf - fireHighInterval/2) && fireFlip == 0) {
          var fireHighHalfCoin = Math.random();
          console.log ("halfway and fireHighhalfcoin is " + fireHighHalfCoin);
          if ( fireHighHalfCoin >= 0.5 ) {
            fireFlip = 1;
          } else {
            fireslider.val(fireCurrentVolNum + fireHighInterval); 
          }
        } else if ( fireCurrentVolNum >= fireHigh ) {
          fireFlip = 1;
          fireslider.val(fireCurrentVolNum - fireHighInterval);
        } else if ( fireCurrentVolNum < fireStart && fireCurrentVolNum > fireLow && fireFlip == 0 ) {
          fireslider.val(fireCurrentVolNum - fireLowInterval);  
        } else if ( fireCurrentVolNum < fireStart && fireCurrentVolNum > fireLow && fireFlip == 1 ) {
          fireslider.val(fireCurrentVolNum + fireLowInterval);
        } else if ( fireCurrentVolNum > fireStart && fireFlip == 0 ) {
          fireslider.val(fireCurrentVolNum + fireHighInterval);     
        } else if ( fireCurrentVolNum > fireStart && fireFlip == 1 ) {
          fireslider.val(fireCurrentVolNum - fireHighInterval);    
        }
      fireslider.slider("refresh"); 
      }
      
      //
      
      if ( wavesContainer.hasClass( 'sliders-expanded' ) && wavesStart > 0.02 ) {

        var wavesCurrentVol = wavesslider.val();
        var wavesCurrentVolNum = parseFloat( wavesCurrentVol );
        
        if ( wavesCurrentVolNum === wavesStart ) {
          wavesFlip = 0;
          var coin = Math.random();
          if ( coin <= 0.5 ) {
            wavesslider.val(wavesCurrentVolNum - wavesLowInterval);
          } else {
            wavesslider.val(wavesCurrentVolNum + wavesHighInterval);
          }
        } else if ( wavesCurrentVolNum <= (wavesLowHalf + (wavesLowInterval/2) ) && wavesCurrentVolNum >= (wavesLowHalf - wavesLowInterval/2) && wavesFlip == 0) {
          var wavesLowHalfCoin = Math.random();
          if ( wavesLowHalfCoin <= 0.5 ) {
            wavesFlip = 1;
          }
          else {
            wavesslider.val(wavesCurrentVolNum - wavesLowInterval)  
          }
        } else if ( wavesCurrentVolNum <= wavesLow) {
          wavesFlip = 1;
          wavesslider.val(wavesLow + wavesLowInterval);
        } else if ( wavesCurrentVolNum <= (wavesHighHalf + (wavesHighInterval/2) ) && wavesCurrentVolNum >= (wavesHighHalf - wavesHighInterval/2) && wavesFlip == 0) {
          var wavesHighHalfCoin = Math.random();
          console.log ("halfway and wavesHighhalfcoin is " + wavesHighHalfCoin);
          if ( wavesHighHalfCoin >= 0.5 ) {
            wavesFlip = 1;
          } else {
            wavesslider.val(wavesCurrentVolNum + wavesHighInterval); 
          }
        } else if ( wavesCurrentVolNum >= wavesHigh ) {
          wavesFlip = 1;
          wavesslider.val(wavesCurrentVolNum - wavesHighInterval);
        } else if ( wavesCurrentVolNum < wavesStart && wavesCurrentVolNum > wavesLow && wavesFlip == 0 ) {
          wavesslider.val(wavesCurrentVolNum - wavesLowInterval);  
        } else if ( wavesCurrentVolNum < wavesStart && wavesCurrentVolNum > wavesLow && wavesFlip == 1 ) {
          wavesslider.val(wavesCurrentVolNum + wavesLowInterval);
        } else if ( wavesCurrentVolNum > wavesStart && wavesFlip == 0 ) {
          wavesslider.val(wavesCurrentVolNum + wavesHighInterval);     
        } else if ( wavesCurrentVolNum > wavesStart && wavesFlip == 1 ) {
          wavesslider.val(wavesCurrentVolNum - wavesHighInterval);    
        }
      wavesslider.slider("refresh"); 
      }
      
      //
      
      if ( birdsContainer.hasClass( 'sliders-expanded' ) && birdsStart > 0.02 ) {

        var birdsCurrentVol = birdsslider.val();
        var birdsCurrentVolNum = parseFloat( birdsCurrentVol );
        
        if ( birdsCurrentVolNum === birdsStart ) {
          birdsFlip = 0;
          var coin = Math.random();
          if ( coin <= 0.5 ) {
            birdsslider.val(birdsCurrentVolNum - birdsLowInterval);
          } else {
            birdsslider.val(birdsCurrentVolNum + birdsHighInterval);
          }
        } else if ( birdsCurrentVolNum <= (birdsLowHalf + (birdsLowInterval/2) ) && birdsCurrentVolNum >= (birdsLowHalf - birdsLowInterval/2) && birdsFlip == 0) {
          var birdsLowHalfCoin = Math.random();
          if ( birdsLowHalfCoin <= 0.5 ) {
            birdsFlip = 1;
          }
          else {
            birdsslider.val(birdsCurrentVolNum - birdsLowInterval)  
          }
        } else if ( birdsCurrentVolNum <= birdsLow) {
          birdsFlip = 1;
          birdsslider.val(birdsLow + birdsLowInterval);
        } else if ( birdsCurrentVolNum <= (birdsHighHalf + (birdsHighInterval/2) ) && birdsCurrentVolNum >= (birdsHighHalf - birdsHighInterval/2) && birdsFlip == 0) {
          var birdsHighHalfCoin = Math.random();
          console.log ("halfway and birdsHighhalfcoin is " + birdsHighHalfCoin);
          if ( birdsHighHalfCoin >= 0.5 ) {
            birdsFlip = 1;
          } else {
            birdsslider.val(birdsCurrentVolNum + birdsHighInterval); 
          }
        } else if ( birdsCurrentVolNum >= birdsHigh ) {
          birdsFlip = 1;
          birdsslider.val(birdsCurrentVolNum - birdsHighInterval);
        } else if ( birdsCurrentVolNum < birdsStart && birdsCurrentVolNum > birdsLow && birdsFlip == 0 ) {
          birdsslider.val(birdsCurrentVolNum - birdsLowInterval);  
        } else if ( birdsCurrentVolNum < birdsStart && birdsCurrentVolNum > birdsLow && birdsFlip == 1 ) {
          birdsslider.val(birdsCurrentVolNum + birdsLowInterval);
        } else if ( birdsCurrentVolNum > birdsStart && birdsFlip == 0 ) {
          birdsslider.val(birdsCurrentVolNum + birdsHighInterval);     
        } else if ( birdsCurrentVolNum > birdsStart && birdsFlip == 1 ) {
          birdsslider.val(birdsCurrentVolNum - birdsHighInterval);    
        }
      birdsslider.slider("refresh"); 
      }
      
      //
      
      if ( humansContainer.hasClass( 'sliders-expanded' ) && humansStart > 0.02 ) {

        var humansCurrentVol = humansslider.val();
        var humansCurrentVolNum = parseFloat( humansCurrentVol );
        
        if ( humansCurrentVolNum === humansStart ) {
          humansFlip = 0;
          var coin = Math.random();
          if ( coin <= 0.5 ) {
            humansslider.val(humansCurrentVolNum - humansLowInterval);
          } else {
            humansslider.val(humansCurrentVolNum + humansHighInterval);
          }
        } else if ( humansCurrentVolNum <= (humansLowHalf + (humansLowInterval/2) ) && humansCurrentVolNum >= (humansLowHalf - humansLowInterval/2) && humansFlip == 0) {
          var humansLowHalfCoin = Math.random();
          if ( humansLowHalfCoin <= 0.5 ) {
            humansFlip = 1;
          }
          else {
            humansslider.val(humansCurrentVolNum - humansLowInterval)  
          }
        } else if ( humansCurrentVolNum <= humansLow) {
          humansFlip = 1;
          humansslider.val(humansLow + humansLowInterval);
        } else if ( humansCurrentVolNum <= (humansHighHalf + (humansHighInterval/2) ) && humansCurrentVolNum >= (humansHighHalf - humansHighInterval/2) && humansFlip == 0) {
          var humansHighHalfCoin = Math.random();
          console.log ("halfway and humansHighhalfcoin is " + humansHighHalfCoin);
          if ( humansHighHalfCoin >= 0.5 ) {
            humansFlip = 1;
          } else {
            humansslider.val(humansCurrentVolNum + humansHighInterval); 
          }
        } else if ( humansCurrentVolNum >= humansHigh ) {
          humansFlip = 1;
          humansslider.val(humansCurrentVolNum - humansHighInterval);
        } else if ( humansCurrentVolNum < humansStart && humansCurrentVolNum > humansLow && humansFlip == 0 ) {
          humansslider.val(humansCurrentVolNum - humansLowInterval);  
        } else if ( humansCurrentVolNum < humansStart && humansCurrentVolNum > humansLow && humansFlip == 1 ) {
          humansslider.val(humansCurrentVolNum + humansLowInterval);
        } else if ( humansCurrentVolNum > humansStart && humansFlip == 0 ) {
          humansslider.val(humansCurrentVolNum + humansHighInterval);     
        } else if ( humansCurrentVolNum > humansStart && humansFlip == 1 ) {
          humansslider.val(humansCurrentVolNum - humansHighInterval);    
        }
      humansslider.slider("refresh"); 
      }
      
      //
  }
  clearInterval(meanderFunction);  
  meanderSliderValue = (1000 - meanderSlider.val() );
  meanderFunction = setInterval( meanderActualFunction, meanderSliderValue);
  };


//  var rainMeander = setInterval( function() { rainMeanderFunc(rainStart, rainHigh, rainHighHalf, rainLow, rainLowHalf, rainslider) }, meanderSliderValue);

//  function rainMeanderFunc (rainStart, rainHigh, rainHighHalf, rainLow, rainLowHalf, slider) {
      
     
  
//  clearInterval(rainMeander)
//  meanderSliderValue = (1000 - meanderSlider.val() );
//  rainMeander = setInterval( function() { rainMeanderFunc(rainStart, rainHigh, rainHighHalf, rainLow, rainLowHalf, rainslider) }, meanderSliderValue);
//  console.log("meander interval = " + meanderSliderValue);
          
//  }
  
// 

//});

});

});
</script>
</head>

<body data-role="none">
<div id="page-container">

<div id="share-buttons">
  <a href="info.html" id="about-top" class="top-buttons" data-ajax="false" target="_blank">About</a>
  <a href="#" id="share" class="sharetoggle top-buttons">Share your mix</a>
  <a href="#" id="updates" class="top-buttons">Get updates</a>
    <div class="sharehidden">
      <p>Link for your custom mix:</p>
      <p><span id="showshareurl"></span></p>
      <p>Share your mix on:</p>
      <div id="socialbuttons">
      
        <p><a href="#" id="facebooklink" target="_blank" class="sharelink">Facebook</a></p>
        <p><a href="#" id="twitterlink" target="_blank" class="sharelink">Twitter</a></p>
        <p id="plast"><a href="#" id="googlepluslink" target="_blank" class="sharelink">Google+</a></p>
      
      </div>  
    </div>
  

</div>

<div id="site-title">
  <h1>A SOFT MURMUR</h1>
</div>

<div id="intro-text" class="dtext">
  <p>Ambient sounds to wash away distraction.</p>
</div>

<div id="all-controls">
  <div id="play-pause-container">
    <a href="#">
      <div id="play-pause-button" class="play-all"></div>
    </a>
  </div>
</div>
<div id="loading" class="dtext">
  <p>Loading</p>
</div>

<div id="options" class="otext">
  <p id="tools-p"><a href="#" id="optionsbutton" class="show_hide"><span class="hotkey">T</span>ools</a></p>
  <div class="optionshidden">
  <div id="optionscontainer">
  <div id ="buttonoptions" class="linkbuttons">
        <p id="silence-p" class="key-shortcut"><a href="#" id="silence">Silence all</a></p>
        <p id="meander-p" class="key-shortcut"><a href="#" id="meander">Meander</a></p>
  </div>
  
    <div id="timedpausepre" class="linkbuttons">
    <p><a href="#" id="timedpauseprompt">Timed pause</a></p>
    <div id="timedpausenumberentry">Pause in <input type="number" id="minutestillpause" value="10" size ="1" data-role="none" /> minutes</div>
    <div id="timedpauseentry"><a href="#" id="timedpausebutton">Start timer</a></div>
    </div>
    
    <div id="timedstartpre" class="linkbuttons">
    <p><a href="#" id="timedstartprompt">Alarm</a></p>
    <div id="timedstartnumberentry">Start playing in <input type="number" id="minutestillstart" value="10" size ="1" data-role="none" /> minutes</div>
    <div id="timedstartentry"><a href="#" id="timedstartbutton">Start timer</a></div>
    </div>    
    
    <div id="timedfadepre" class="linkbuttons">
    <p><a href="#" id="timedfadeprompt">Timed fade to silence</a></p>
    <div id="timedfadenumberentry">Fade to silence over</a> <input type="number" id="minutestillfade" value="10" size ="1" data-role="none" /> minutes</div>
    <div id="timedfadeentry"><a href="#" id="timedfadebutton">Start timer</a></div>
    </div>
    
    <div id="post-container">
    <div id="timedpausepost" class="linkbuttons">
    <p>Sounds will pause in <span id="timedpauseminutesleft"></span>.</p><p> <a href="#" id="canceltp">Cancel</a></p>
    </div>
    <div id="timedstartpost" class="linkbuttons">
    <p>Sounds will start in <span id="timedstartminutesleft"></span>.</p><p> <a href="#" id="cancelts">Cancel</a></p>
    </div>    
    <div id="timedfadepost" class="linkbuttons">
    <p>Sounds will fade to silence in <span id="timedfademinutesleft"></span>.</p><p> <a href="#" id="canceltf">Cancel</a></p>  
    </div>
    <div id="meanderpost">
    <p id="meander-description">Meandering <span id="meander-speed">steadily</span></p> 
    
    <div id="meander-slider-container">
      <div class="labelfix">
        <label for="meander-slider">Speed</label>
      </div>
      
      <input type="range" id="meander-slider" value="500" min="100" max="900" step="200" class="ui-hidden-accessible"/>

    </div> 
       
    <p class="linkbuttons"><a href="#" id="cancelmeander">Cancel</a></p>  
    </div>
    </div>
  
  </div>
</div>

<div id="sliders-container">

<div id="rain-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="rain-collapse-button"></div>
  <div class="expand-button" id="rain-expand-button"><div class="expand-icon"></div></div>
  <div id="rain-slider-background" class="slider-background"></div>
  <div id="rain-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="rain-slider">Rain</label> </div>
      <input type="range" id="rain-slider" value="0.3" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

<div id="thunder-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="thunder-collapse-button"></div>
  <div class="expand-button" id="thunder-expand-button"><div class="expand-icon"></div></div>
  <div id="thunder-slider-background" class="slider-background"></div>
  <div id="thunder-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="thunder-slider">Thunder</label> </div>
      <input type="range" id="thunder-slider" value="0.8" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

<div id="fire-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="fire-collapse-button"></div>
  <div class="expand-button" id="fire-expand-button"><div class="expand-icon"></div></div>
  <div id="fire-slider-background" class="slider-background"></div>
  <div id="fire-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="fire-slider">Fire</label> </div>
      <input type="range" id="fire-slider" value="0.4" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

<div id="waves-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="waves-collapse-button"></div>
  <div class="expand-button" id="waves-expand-button"><div class="expand-icon"></div></div>
  <div id="waves-slider-background" class="slider-background"></div>
  <div id="waves-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="waves-slider">Waves</label> </div>
      <input type="range" id="waves-slider" value="0.0" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

<div id="birds-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="birds-collapse-button"></div>
  <div class="expand-button" id="birds-expand-button"><div class="expand-icon"></div></div>
  <div id="birds-slider-background" class="slider-background"></div>
  <div id="birds-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="birds-slider">Birds</label> </div>
      <input type="range" id="birds-slider" value="0.0" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

<div id="humans-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="humans-collapse-button"></div>
  <div class="expand-button" id="humans-expand-button"><div class="expand-icon"></div></div>
  <div id="humans-slider-background" class="slider-background"></div>
  <div id="humans-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="humans-slider">Humans</label> </div>
      <input type="range" id="humans-slider" value="0.0" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

<div id="cicadatest-slider-container" class="sliders sliders-collapsed">
  <div class="collapse-button" id="cicada-collapse-button"></div>
  <div class="expand-button" id="cicada-expand-button"><div class="expand-icon"></div></div>
  <div id="cicadatest-slider-background" class="slider-background"></div> 
  <div id="cicadatest-slider-container-inner" class="slider-inner">
    <div class="labelfix"> <label for="cicadatest-slider">Cicadas</label> </div>
      <input type="range" id="cicadatest-slider" value="0.0" min="0" max="0.999" step="0.001" class="ui-hidden-accessible"/>
  </div>
</div>

</div>

<div id="image-preload-1">
</div>

<div id="image-preload-2">
</div>

<div id="footer">
</div>

<!-- Audio players without controls -->

<!-- Make audio local for faster testing

<div class="audioplayer">
  <audio id="wavesplayer" loop preload="none">
    <source src="http://st3.mi4.org/waves.fade.mp4" type="audio/mp4" />
    <source src="http://st3.mi4.org/waves.fade.ogg" type="audio/ogg" />
  </audio>
</div>

<div class="audioplayer">
  <audio id="wavesglueplayer" preload="auto">
    <source src="http://stat3.orderedwords.com/waves.glue.mp4" type="audio/mp4" />
    <source src="http://stat3.orderedwords.com/waves.glue.ogg" type="audio/ogg" />
  </audio>
</div>

<div class="audioplayer">
  <audio id="rainplayer" loop preload="none">
    <source src="http://st2.mi4.org/rain.fade.mp4" type="audio/mp4">
    <source src="http://st2.mi4.org/rain.fade.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="rainglueplayer" preload="auto">
    <source src="http://stat2.orderedwords.com/rain.glue.mp4" type="audio/mp4">
    <source src="http://stat2.orderedwords.com/rain.glue.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="thunderplayer" loop preload="none">
    <source src="http://st3.mi4.org/thunder.fade.mp4" type="audio/mp4">
    <source src="http://st3.mi4.org/thunder.fade.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="thunderglueplayer" preload="auto">
    <source src="http://stat3.orderedwords.com/thunder.glue.mp4" type="audio/mp4">
    <source src="http://stat3.orderedwords.com/thunder.glue.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="fireplayer" loop preload="none">
    <source src="http://st1.mi4.org/fire.fade.mp4" type="audio/mp4">
    <source src="http://st1.mi4.org/fire.fade.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="fireglueplayer" preload="auto">
    <source src="http://stat1.orderedwords.com/fire.glue.mp4" type="audio/mp4">
    <source src="http://stat1.orderedwords.com/fire.glue.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="birdsplayer" loop preload="none">
    <source src="http://st1.mi4.org/birds.fade.mp4" type="audio/mp4">
    <source src="http://st1.mi4.org/birds.fade.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="birdsglueplayer" preload="auto">
    <source src="http://stat1.orderedwords.com/birds.glue.mp4" type="audio/mp4">
    <source src="http://stat1.orderedwords.com/birds.glue.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="humansplayer" loop preload="none">
    <source src="http://st2.mi4.org/humans.fade.mp4" type="audio/mp4">
    <source src="http://st2.mi4.org/humans.fade.ogg" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="humansglueplayer" preload="auto">
    <source src="http://stat2.orderedwords.com/humans.glue.mp4" type="audio/mp4">
    <source src="http://stat2.orderedwords.com/humans.glue.ogg" type="audio/ogg">
  </audio>
</div>

-->

<div class="audioplayer">
  <audio id="rainplayer" loop>
    <source id="rainmp4" src="" type="audio/mp4">
    <source id="rainogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="rainglueplayer">
    <source id="raingluemp4" src="" type="audio/mp4">
    <source id="rainglueogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="thunderplayer" loop>
    <source id="thundermp4" src="" type="audio/mp4">
    <source id="thunderogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="thunderglueplayer">
    <source id="thundergluemp4" src="" type="audio/mp4">
    <source id="thunderglueogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="fireplayer" loop>
    <source id="firemp4" src="" type="audio/mp4">
    <source id="fireogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="fireglueplayer">
    <source id="firegluemp4" src="" type="audio/mp4">
    <source id="fireglueogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="wavesplayer" loop>
    <source id="wavesmp4" src="" type="audio/mp4">
    <source id="wavesogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="wavesglueplayer">
    <source id="wavesgluemp4" src="" type="audio/mp4">
    <source id="wavesglueogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="birdsplayer" loop>
    <source id="birdsmp4" src="" type="audio/mp4">
    <source id="birdsogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="birdsglueplayer">
    <source id="birdsgluemp4" src="" type="audio/mp4">
    <source id="birdsglueogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="humansplayer" loop>
    <source id="humansmp4" src="" type="audio/mp4">
    <source id="humansogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="humansglueplayer">
    <source id="humansgluemp4" src="" type="audio/mp4">
    <source id="humansglueogg" src="" type="audio/ogg">
  </audio>
</div>

<div class="audioplayer">
  <audio id="cicadatest">
    <source id="cicadatestmp4" src="" type="audio/mp4">
  </audio>
</div>

<div class="audioplayer">
  <audio id="cicadatest-glue">
    <source id="cicadatest-gluemp4" src="" type="audio/mp4">
  </audio>
</div>

<!-- end audio players -->

</div>
</body>
</html>